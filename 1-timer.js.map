{"version":3,"file":"1-timer.js","sources":["../src/js/1-timer.js"],"sourcesContent":["import flatpickr from 'flatpickr';\nimport 'flatpickr/dist/flatpickr.min.css';\nimport { refs, convertMs } from './storage';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nlet selectedDate = null;\nlet countdownInterval = null;\n\nflatpickr(refs.input, {\n  enableTime: true,\n  time_24hr: true,\n  defaultDate: new Date(),\n  minuteIncrement: 1,\n  onClose: function (selectedDates) {\n    selectedDate = selectedDates[0];\n\n    if (!selectedDate || selectedDate.getTime() <= Date.now()) {\n      iziToast.error({\n        title: 'Помилка!',\n        message: 'Будь ласка, виберіть дату в майбутньому.',\n        position: 'topRight',\n      });\n      refs.btn.setAttribute('disabled', true);\n    } else {\n      refs.btn.removeAttribute('disabled');\n    }\n  },\n});\n\nrefs.btn.setAttribute('disabled', true);\n\nrefs.btn.addEventListener('click', () => {\n  if (countdownInterval) {\n    clearInterval(countdownInterval);\n  }\n\n  refs.btn.setAttribute('disabled', true);\n  refs.input.setAttribute('disabled', true);\n  refs.btn.style.pointerEvents = 'none';\n\n  countdownInterval = setInterval(() => {\n    const now = new Date().getTime();\n    const ms = selectedDate - now;\n\n    if (ms <= 0) {\n      clearInterval(countdownInterval);\n      refs.days.textContent =\n        refs.hours.textContent =\n        refs.minutes.textContent =\n        refs.seconds.textContent =\n          '00';\n      refs.input.removeAttribute('disabled');\n      return;\n    }\n\n    const { days, hours, minutes, seconds } = convertMs(ms);\n\n    refs.days.textContent = String(days).padStart(2, '0');\n    refs.hours.textContent = String(hours).padStart(2, '0');\n    refs.minutes.textContent = String(minutes).padStart(2, '0');\n    refs.seconds.textContent = String(seconds).padStart(2, '0');\n  }, 1000);\n});\n"],"names":["selectedDate","countdownInterval","flatpickr","refs","selectedDates","iziToast","now","ms","days","hours","minutes","seconds","convertMs"],"mappings":"mJAMA,IAAIA,EAAe,KACfC,EAAoB,KAExBC,EAAUC,EAAK,MAAO,CACpB,WAAY,GACZ,UAAW,GACX,YAAa,IAAI,KACjB,gBAAiB,EACjB,QAAS,SAAUC,EAAe,CAChCJ,EAAeI,EAAc,CAAC,EAE1B,CAACJ,GAAgBA,EAAa,QAAO,GAAM,KAAK,OAClDK,EAAS,MAAM,CACb,MAAO,WACP,QAAS,2CACT,SAAU,UAClB,CAAO,EACDF,EAAK,IAAI,aAAa,WAAY,EAAI,GAEtCA,EAAK,IAAI,gBAAgB,UAAU,CAEtC,CACH,CAAC,EAEDA,EAAK,IAAI,aAAa,WAAY,EAAI,EAEtCA,EAAK,IAAI,iBAAiB,QAAS,IAAM,CACnCF,GACF,cAAcA,CAAiB,EAGjCE,EAAK,IAAI,aAAa,WAAY,EAAI,EACtCA,EAAK,MAAM,aAAa,WAAY,EAAI,EACxCA,EAAK,IAAI,MAAM,cAAgB,OAE/BF,EAAoB,YAAY,IAAM,CACpC,MAAMK,EAAM,IAAI,KAAM,EAAC,QAAO,EACxBC,EAAKP,EAAeM,EAE1B,GAAIC,GAAM,EAAG,CACX,cAAcN,CAAiB,EAC/BE,EAAK,KAAK,YACRA,EAAK,MAAM,YACXA,EAAK,QAAQ,YACbA,EAAK,QAAQ,YACX,KACJA,EAAK,MAAM,gBAAgB,UAAU,EACrC,MACD,CAED,KAAM,CAAE,KAAAK,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,GAAYC,EAAUL,CAAE,EAEtDJ,EAAK,KAAK,YAAc,OAAOK,CAAI,EAAE,SAAS,EAAG,GAAG,EACpDL,EAAK,MAAM,YAAc,OAAOM,CAAK,EAAE,SAAS,EAAG,GAAG,EACtDN,EAAK,QAAQ,YAAc,OAAOO,CAAO,EAAE,SAAS,EAAG,GAAG,EAC1DP,EAAK,QAAQ,YAAc,OAAOQ,CAAO,EAAE,SAAS,EAAG,GAAG,CAC3D,EAAE,GAAI,CACT,CAAC"}